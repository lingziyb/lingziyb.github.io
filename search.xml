<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>react-native遇坑的陈列</title>
      <link href="/2019/07/07/react-native.1/"/>
      <url>/2019/07/07/react-native.1/</url>
      
        <content type="html"><![CDATA[<h3 id="记录开始"><a href="#记录开始" class="headerlink" title="记录开始"></a>记录开始</h3><blockquote><p>公司要做一个APP产品，自己会些皮毛，所以在开发的过程中还是遇到了比较多的问题（比如，一开始就安装不上啊，各种报红啊，怎么排查问题啊，轮播插件不响应啊，typescript不怎么会写啊…等等等）。顺便把mbox和typescript给融合进去了。</p></blockquote><h3 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h3><p>windows系统<br>android studio安卓模拟器 / 安卓手机</p><h3 id="记录罗列"><a href="#记录罗列" class="headerlink" title="记录罗列"></a>记录罗列</h3><ol><li><p>vscode 运行 react-native run android 报错，然后用android-studio运行就好了。</p></li><li><p>vscode里开发，代码 stylesheet里样式无提示。两个解决方案：</p><ul><li><p>解决方案一，改源码。<br>参考：<a href="https://github.com/microsoft/vscode-react-native/issues/379" target="_blank" rel="noopener">https://github.com/microsoft/vscode-react-native/issues/379</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6778</span><br></pre></td></tr></table></figure></li><li><p>解决方案二，版本更新，最新版已修复此问题。（一开始我不知道已有版本不是最新版…）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">77888</span><br></pre></td></tr></table></figure></li></ul></li></ol><ol start="3"><li><p>报错：<code>Unhandled JS Exception: TypeError: undefined is not an object (evaluating &#39;this._subscribableSubscriptions.forEach&#39;)</code></p><p> 解决方案：</p><p> 参考：<a href="https://github.com/facebook/react-native/issues/17348" target="_blank" rel="noopener">https://github.com/facebook/react-native/issues/17348</a></p></li><li><p>不打开debug一切正常，当打开debug时报错：<code>window.deltaUrlToBlobUrl is not a function</code>。</p><p> <img src="https://upload-images.jianshu.io/upload_images/3453108-ed976ab7e78b9bc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="error.png"></p><p> 解决方案：localhost 改成 ip 地址。</p><p> 参考：<a href="https://stackoverflow.com/questions/49365217/react-native-debug-js-remotely-error-window-deltaurltobloburl-is-not-a-function" target="_blank" rel="noopener">https://stackoverflow.com/questions/49365217/react-native-debug-js-remotely-error-window-deltaurltobloburl-is-not-a-function</a></p></li><li><p>react-native-swiper，scrollBy用法。</p><p><img src="https://upload-images.jianshu.io/upload_images/3453108-723338ec09f20cf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>react-native-swiper，轮播数据用map循环动态渲染，onIndexChanged 只执行一次：</p><p> 拒绝此类方案：拆东墙补西墙 <a href="https://www.jianshu.com/p/a46a57484946" target="_blank" rel="noopener">https://www.jianshu.com/p/a46a57484946</a> ！</p><p> 解决方案：对list数组进行判断。(注：加下面四句代码就行了)</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">    if (HomeStore.list.length &gt; 0) &#123;     // ++++++++ 对list数组进行判断</span><br><span class="line">        return (</span><br><span class="line">            &lt;View style=&#123;styles.content&#125;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;Swiper style=&#123;styles.swiper&#125; showsButtons=&#123;false&#125;</span><br><span class="line">                    ref=&#123;swiper =&gt; &#123; HomeStore.swiperDom = swiper &#125;&#125;</span><br><span class="line">                    loadMinimal=&#123;true&#125;</span><br><span class="line">                    index=&#123;HomeStore.currentIndex&#125;</span><br><span class="line">                    loop=&#123;false&#125; showsPagination=&#123;false&#125;</span><br><span class="line">                    automaticallyAdjustContentInsets=&#123;true&#125;</span><br><span class="line">                    removeClippedSubviews=&#123;true&#125;</span><br><span class="line">                    bounces=&#123;true&#125;</span><br><span class="line">                    onIndexChanged=&#123;this.onIndexChanged&#125; &gt;</span><br><span class="line"></span><br><span class="line">                    &#123;</span><br><span class="line">                        HomeStore.list.map((item, i) =&gt; &#123;</span><br><span class="line">                            return (</span><br><span class="line">                                &lt;Info item=&#123;item&#125; key=&#123;i&#125; index=&#123;i&#125; list=&#123;HomeStore.list&#125; /&gt;</span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &lt;/Swiper&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/View&gt;</span><br><span class="line"></span><br><span class="line">        );</span><br><span class="line">    &#125; else &#123;   // ++++++++ 对list数组进行判断</span><br><span class="line">        return &lt;View&gt;&lt;/View&gt;;   // ++++++++ 对list数组进行判断</span><br><span class="line">    &#125;   // ++++++++ 对list数组进行判断</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>报错：<code>request:fail url not in domain list</code>。在获取地址时，用的腾讯api解析的经纬度，测试时没问题，上线了就报这个错了。</p><p> 解决方案：微信公众平台，在“设置” -&gt; “开发设置”中设置request合法域名，添加<a href="https://apis.map.qq.com。（本来以为他们是一家，不用加，结果还是要加。）" target="_blank" rel="noopener">https://apis.map.qq.com。（本来以为他们是一家，不用加，结果还是要加。）</a></p><p> 参考：<a href="https://blog.csdn.net/weixin_43047977/article/details/84836501" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43047977/article/details/84836501</a> 。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> app </tag>
            
            <tag> react-native </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-native遇坑的陈列</title>
      <link href="/2019/07/07/react-native/"/>
      <url>/2019/07/07/react-native/</url>
      
        <content type="html"><![CDATA[<h3 id="记录开始"><a href="#记录开始" class="headerlink" title="记录开始"></a>记录开始</h3><blockquote><p>公司要做一个APP产品，自己会些皮毛，所以在开发的过程中还是遇到了比较多的问题（比如，一开始就安装不上啊，各种报红啊，怎么排查问题啊，轮播插件不响应啊，typescript不怎么会写啊…等等等）。顺便把mbox和typescript给融合进去了。</p></blockquote><h3 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h3><p>windows系统<br>android studio安卓模拟器 / 安卓手机</p><h3 id="记录罗列"><a href="#记录罗列" class="headerlink" title="记录罗列"></a>记录罗列</h3><ol><li><p>vscode 运行 react-native run android 报错，然后用android-studio运行就好了。</p></li><li><p>vscode里开发，代码 stylesheet里样式无提示。两个解决方案：</p><ul><li><p>解决方案一，改源码。<br>参考：<a href="https://github.com/microsoft/vscode-react-native/issues/379" target="_blank" rel="noopener">https://github.com/microsoft/vscode-react-native/issues/379</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 源码</span><br><span class="line">export function create&lt;T extends NamedStyles&lt;T&gt; | NamedStyles&lt;any&gt;&gt;(styles: T): T;    </span><br><span class="line">// 改进后的：</span><br><span class="line">export function create&lt;T extends NamedStyles&lt;T&gt;&gt;(styles: NamedStyles&lt;T&gt;): &#123; [P in keyof T]: RegisteredStyle&lt;T[P]&gt; &#125;;</span><br></pre></td></tr></table></figure></li><li><p>解决方案二，版本更新，最新版已修复此问题。（一开始我不知道已有版本不是最新版…）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 因为之前装的版本是：&quot;@types/react-native&quot;: &quot;0.57.63&quot;</span><br><span class="line">export function create&lt;T extends NamedStyles&lt;T&gt; | NamedStyles&lt;any&gt;&gt;(styles: T): T;</span><br><span class="line"></span><br><span class="line">// 然后版本更新到：&quot;@types/react-native&quot;: &quot;^0.60.0&quot;</span><br><span class="line">export function create&lt;T extends NamedStyles&lt;T&gt; | NamedStyles&lt;any&gt;&gt;(styles: T | NamedStyles&lt;T&gt;): T;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>报错：<code>Unhandled JS Exception: TypeError: undefined is not an object (evaluating &#39;this._subscribableSubscriptions.forEach&#39;)</code></p><p> 解决方案：</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// package.json文件里加上</span><br><span class="line">&quot;resolutions&quot;: &#123;</span><br><span class="line">    &quot;uglify-es&quot;: &quot;&gt;=3.3.4&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><pre><code>参考：https://github.com/facebook/react-native/issues/17348</code></pre><ol start="4"><li><p>不打开debug一切正常，当打开debug时报错：<code>window.deltaUrlToBlobUrl is not a function</code>。</p><p> <img src="https://upload-images.jianshu.io/upload_images/3453108-ed976ab7e78b9bc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="error.png"></p><p> 解决方案：localhost 改成 ip 地址。</p><p> 参考：<a href="https://stackoverflow.com/questions/49365217/react-native-debug-js-remotely-error-window-deltaurltobloburl-is-not-a-function" target="_blank" rel="noopener">https://stackoverflow.com/questions/49365217/react-native-debug-js-remotely-error-window-deltaurltobloburl-is-not-a-function</a></p></li><li><p>react-native-swiper，scrollBy用法。</p><p><img src="https://upload-images.jianshu.io/upload_images/3453108-723338ec09f20cf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>react-native-swiper，轮播数据用map循环动态渲染，onIndexChanged 只执行一次：</p><p> 拒绝此类方案：拆东墙补西墙 <a href="https://www.jianshu.com/p/a46a57484946" target="_blank" rel="noopener">https://www.jianshu.com/p/a46a57484946</a> ！</p><p> 解决方案：对list数组进行判断。(注：加下面四句代码就行了)</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">    if (HomeStore.list.length &gt; 0) &#123;     // ++++++++ 对list数组进行判断</span><br><span class="line">        return (</span><br><span class="line">            &lt;View style=&#123;styles.content&#125;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;Swiper style=&#123;styles.swiper&#125; showsButtons=&#123;false&#125;</span><br><span class="line">                    ref=&#123;swiper =&gt; &#123; HomeStore.swiperDom = swiper &#125;&#125;</span><br><span class="line">                    loadMinimal=&#123;true&#125;</span><br><span class="line">                    index=&#123;HomeStore.currentIndex&#125;</span><br><span class="line">                    loop=&#123;false&#125; showsPagination=&#123;false&#125;</span><br><span class="line">                    automaticallyAdjustContentInsets=&#123;true&#125;</span><br><span class="line">                    removeClippedSubviews=&#123;true&#125;</span><br><span class="line">                    bounces=&#123;true&#125;</span><br><span class="line">                    onIndexChanged=&#123;this.onIndexChanged&#125; &gt;</span><br><span class="line"></span><br><span class="line">                    &#123;</span><br><span class="line">                        HomeStore.list.map((item, i) =&gt; &#123;</span><br><span class="line">                            return (</span><br><span class="line">                                &lt;Info item=&#123;item&#125; key=&#123;i&#125; index=&#123;i&#125; list=&#123;HomeStore.list&#125; /&gt;</span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &lt;/Swiper&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/View&gt;</span><br><span class="line"></span><br><span class="line">        );</span><br><span class="line">    &#125; else &#123;   // ++++++++ 对list数组进行判断</span><br><span class="line">        return &lt;View&gt;&lt;/View&gt;;   // ++++++++ 对list数组进行判断</span><br><span class="line">    &#125;   // ++++++++ 对list数组进行判断</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>报错：<code>request:fail url not in domain list</code>。在获取地址时，用的腾讯api解析的经纬度，测试时没问题，上线了就报这个错了。</p><p> 解决方案：微信公众平台，在“设置” -&gt; “开发设置”中设置request合法域名，添加<a href="https://apis.map.qq.com。（本来以为他们是一家，不用加，结果还是要加。）" target="_blank" rel="noopener">https://apis.map.qq.com。（本来以为他们是一家，不用加，结果还是要加。）</a></p><p> 参考：<a href="https://blog.csdn.net/weixin_43047977/article/details/84836501" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43047977/article/details/84836501</a> 。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> app </tag>
            
            <tag> react-native </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/03/14/hello-world/"/>
      <url>/2019/03/14/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
