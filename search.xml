<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>react-native</title>
      <link href="/2019/08/12/react-native-2/"/>
      <url>/2019/08/12/react-native-2/</url>
      
        <content type="html"><![CDATA[<h3 id="记录开始"><a href="#记录开始" class="headerlink" title="记录开始"></a>记录开始</h3><blockquote><p>继上一篇继续</p></blockquote><h3 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h3><p>react：16.8.3<br>react-native：0.59.9<br>react-navigation：3.11.0</p><p>windows<br>android studio安卓模拟器 / 安卓手机    </p><h3 id="记录罗列"><a href="#记录罗列" class="headerlink" title="记录罗列"></a>记录罗列</h3><ol><li><p>显示富文本：react-native-webview。但是字体显示不正常，要在接口返回的html里加上viewport 适配：</p><pre><code>&lt;WebViewsource={{    html:      "<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">" +      ArticleStore.article.content  }}/&gt;</code></pre><p>如果里面的图片超出里固定区域，可以顺便加上 img{width:100%;}。</p><pre><code>&lt;WebViewsource={{    html:      "<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><style>img{width: 100%}</style> " +      ArticleStore.article.content  }}/&gt;;</code></pre></li><li><p>虚线只支持全边框（borderWidth），不支持单边的（borderTopWidth）。 而且虚线要想生效，还必须同时设置 borderWidth 和 borderRadius。<br>参考链接：<a href="https://github.com/facebook/react-native/issues/24224" target="_blank" rel="noopener">https://github.com/facebook/react-native/issues/24224</a></p></li><li><p>问题 Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED<br>参考链接：<a href="https://github.com/kmagiera/react-native-gesture-handler/issues/642" target="_blank" rel="noopener">https://github.com/kmagiera/react-native-gesture-handler/issues/642</a></p></li><li><p>轮播插件：react-native-swiper。<br>遇到的问题是：onIndexChanged事件以及scrollBy都不怎么听话，各种问题（比如onIndexChanged时index索引可以为负数..），经常拆东墙补西墙。<br>最终问题点就在于一个：设置key！所有问题消失无踪影。<br><img src="https://upload-images.jianshu.io/upload_images/3453108-b30ace3d6018b40e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> app </tag>
            
            <tag> react-native </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-native</title>
      <link href="/2019/08/12/react-native-3/"/>
      <url>/2019/08/12/react-native-3/</url>
      
        <content type="html"><![CDATA[<h3 id="记录开始"><a href="#记录开始" class="headerlink" title="记录开始"></a>记录开始</h3><blockquote><p>之前都是在windows上开发，公司配的mac终于到了，现在开始用上mac。然而对于一个从未使用过mac的人来说，啊…亚历山大。</p></blockquote><h3 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h3><p>react：16.8.3<br>react-native：0.59.9<br>react-navigation：3.11.0</p><p>windows / mac<br>android studio安卓模拟器 / 安卓手机<br>xcode iphone模拟器 / iphone</p><h3 id="记录罗列"><a href="#记录罗列" class="headerlink" title="记录罗列"></a>记录罗列</h3><ol><li><p>mac 安装 jdk1.8：</p><pre class=" language-javascript"><code class="language-javascript">brew cask install adoptopenjdk<span class="token operator">/</span>openjdk<span class="token operator">/</span>adoptopenjdk8</code></pre></li><li><p>第三方分享和登录，用的友盟。</p></li></ol><ul><li>友盟react-native分享文档：<a href="https://developer.umeng.com/docs/66632/detail/67587#h3-u5206u4EAB" target="_blank" rel="noopener">https://developer.umeng.com/docs/66632/detail/67587#h3-u5206u4EAB</a></li><li>React Native 结合友盟实现分享：<a href="https://juejin.im/post/5c17ba876fb9a049b07d440f#heading-16" target="_blank" rel="noopener">https://juejin.im/post/5c17ba876fb9a049b07d440f#heading-16</a></li><li><a href="https://www.jianshu.com/p/d54b259f7cb0" target="_blank" rel="noopener">https://www.jianshu.com/p/d54b259f7cb0</a></li><li><a href="https://github.com/songxiaoliang/react-native-share" target="_blank" rel="noopener">https://github.com/songxiaoliang/react-native-share</a></li></ul><ol start="3"><li><p>mac  终端翻墙</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> http_proxy<span class="token operator">=</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">1087</span><span class="token keyword">export</span> https_proxy<span class="token operator">=</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">1087</span></code></pre><p>参考链接：<a href="http://kerminate.me/2018/10/22/mac-%E7%BB%88%E7%AB%AF%E5%AE%9E%E7%8E%B0%E7%BF%BB%E5%A2%99/" target="_blank" rel="noopener">http://kerminate.me/2018/10/22/mac-%E7%BB%88%E7%AB%AF%E5%AE%9E%E7%8E%B0%E7%BF%BB%E5%A2%99/</a></p></li><li><p>误删远程dev分支</p></li></ol><ul><li>使用git log -g 找回之前提交的commit</li><li>使用git branch dev commit_id命令用这个commit创建一个分支</li><li>切换到dev分支</li></ul><p>参考文章：<br>git 误删分支恢复方法：<a href="https://blog.csdn.net/new03/article/details/84920771" target="_blank" rel="noopener">https://blog.csdn.net/new03/article/details/84920771</a></p><ol start="5"><li><p>友盟第三方微信分享，唤起微信授权后不走回调。<br>问题解决：回调包wxapi这个文件夹要放在项目包酱人里面（之前是跟jiangren平级的）。<br><img src="https://upload-images.jianshu.io/upload_images/3453108-a7901361fd38e8fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>git提交了过大的文件  导致push报错<br><img src="https://upload-images.jianshu.io/upload_images/3453108-eab486789cc4462d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li></ol><p>解决：<br><img src="https://upload-images.jianshu.io/upload_images/3453108-5051a5e70bf7437e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>参考链接：<a href="https://blog.csdn.net/yimingsilence/article/details/81460278" target="_blank" rel="noopener">https://blog.csdn.net/yimingsilence/article/details/81460278</a></p><ol start="7"><li><p>友盟第三方分享登录：<br>IMEI授权，友盟官网没有说清楚这段代码是加在哪个文件：<br><img src="https://upload-images.jianshu.io/upload_images/3453108-a8ef6735811bbfa1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>问了rn群里的小伙伴才知是加在 MainActivity.java 里！<br><img src="https://upload-images.jianshu.io/upload_images/3453108-7a305492404585d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>非 组件页面  用路由的问题。<br>解决方案：暴露navigation在全局。<br><img src="https://upload-images.jianshu.io/upload_images/3453108-456606797df00cac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> app </tag>
            
            <tag> react-native </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-native遇坑的陈列</title>
      <link href="/2019/07/07/react-native/"/>
      <url>/2019/07/07/react-native/</url>
      
        <content type="html"><![CDATA[<h3 id="记录开始"><a href="#记录开始" class="headerlink" title="记录开始"></a>记录开始</h3><blockquote><p>公司要做一个APP产品，自己会些皮毛，所以在开发的过程中还是遇到了比较多的问题（比如，一开始就安装不上啊，各种报红啊，怎么排查问题啊，轮播插件不响应啊，typescript不怎么会写啊…等等等）。顺便把mbox和typescript给融合进去了。</p></blockquote><h3 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h3><p>windows系统<br>android studio安卓模拟器 / 安卓手机</p><h3 id="记录罗列"><a href="#记录罗列" class="headerlink" title="记录罗列"></a>记录罗列</h3><ol><li><p>vscode 运行 react-native run android 报错，然后用android-studio运行就好了。</p></li><li><p>vscode里开发，代码 stylesheet里样式无提示。两个解决方案：</p><ul><li><p>解决方案一，改源码。<br>参考：<a href="https://github.com/microsoft/vscode-react-native/issues/379" target="_blank" rel="noopener">https://github.com/microsoft/vscode-react-native/issues/379</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 源码</span><span class="token keyword">export</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">NamedStyles</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">|</span> NamedStyles<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>styles<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> T<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 改进后的：</span><span class="token keyword">export</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">NamedStyles</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>styles<span class="token punctuation">:</span> NamedStyles<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>P <span class="token keyword">in</span> keyof T<span class="token punctuation">]</span><span class="token punctuation">:</span> RegisteredStyle<span class="token operator">&lt;</span>T<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">}</span><span class="token punctuation">;</span> </code></pre></li><li><p>解决方案二，版本更新，最新版已修复此问题。（一开始我不知道已有版本不是最新版…）</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 因为之前装的版本是："@types/react-native": "0.57.63"</span><span class="token keyword">export</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">NamedStyles</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">|</span> NamedStyles<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>styles<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> T<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 然后版本更新到："@types/react-native": "^0.60.0"</span><span class="token keyword">export</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">NamedStyles</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">|</span> NamedStyles<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>styles<span class="token punctuation">:</span> T <span class="token operator">|</span> NamedStyles<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> T<span class="token punctuation">;</span></code></pre></li></ul></li><li><p>报错：<code>Unhandled JS Exception: TypeError: undefined is not an object (evaluating &#39;this._subscribableSubscriptions.forEach&#39;)</code></p><p> 解决方案：</p><pre class=" language-javascript"><code class="language-javascript"> <span class="token comment" spellcheck="true">// package.json文件里加上</span> <span class="token string">"resolutions"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>     <span class="token string">"uglify-es"</span><span class="token punctuation">:</span> <span class="token string">">=3.3.4"</span>   <span class="token punctuation">}</span></code></pre><p> 参考：<a href="https://github.com/facebook/react-native/issues/17348" target="_blank" rel="noopener">https://github.com/facebook/react-native/issues/17348</a></p></li><li><p>不打开debug一切正常，当打开debug时报错：<code>window.deltaUrlToBlobUrl is not a function</code>。</p><p> <img src="https://upload-images.jianshu.io/upload_images/3453108-ed976ab7e78b9bc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="error.png"></p><p> 解决方案：localhost 改成 ip 地址。</p><p> 参考：<a href="https://stackoverflow.com/questions/49365217/react-native-debug-js-remotely-error-window-deltaurltobloburl-is-not-a-function" target="_blank" rel="noopener">https://stackoverflow.com/questions/49365217/react-native-debug-js-remotely-error-window-deltaurltobloburl-is-not-a-function</a></p></li><li><p>react-native-swiper，scrollBy用法。</p><p><img src="https://upload-images.jianshu.io/upload_images/3453108-723338ec09f20cf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p></li><li><p>react-native-swiper，轮播数据用map循环动态渲染，onIndexChanged 只执行一次：</p><p> 拒绝此类方案：拆东墙补西墙 <a href="https://www.jianshu.com/p/a46a57484946" target="_blank" rel="noopener">https://www.jianshu.com/p/a46a57484946</a> ！</p><p> 解决方案：对list数组进行判断。(注：加下面四句代码就行了)</p><pre class=" language-javascript"><code class="language-javascript"> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>HomeStore<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment" spellcheck="true">// ++++++++ 对list数组进行判断</span>         <span class="token keyword">return</span> <span class="token punctuation">(</span>             <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token operator">></span>                 <span class="token operator">&lt;</span>Swiper style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>swiper<span class="token punctuation">}</span> showsButtons<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>                     ref<span class="token operator">=</span><span class="token punctuation">{</span>swiper <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> HomeStore<span class="token punctuation">.</span>swiperDom <span class="token operator">=</span> swiper <span class="token punctuation">}</span><span class="token punctuation">}</span>                     loadMinimal<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>                     index<span class="token operator">=</span><span class="token punctuation">{</span>HomeStore<span class="token punctuation">.</span>currentIndex<span class="token punctuation">}</span>                     loop<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> showsPagination<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>                     automaticallyAdjustContentInsets<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>                     removeClippedSubviews<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>                     bounces<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>                     onIndexChanged<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onIndexChanged<span class="token punctuation">}</span> <span class="token operator">></span>                     <span class="token punctuation">{</span>                         HomeStore<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                             <span class="token keyword">return</span> <span class="token punctuation">(</span>                                 <span class="token operator">&lt;</span>Info item<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> index<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> list<span class="token operator">=</span><span class="token punctuation">{</span>HomeStore<span class="token punctuation">.</span>list<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>                             <span class="token punctuation">)</span>                         <span class="token punctuation">}</span><span class="token punctuation">)</span>                     <span class="token punctuation">}</span>                 <span class="token operator">&lt;</span><span class="token operator">/</span>Swiper<span class="token operator">></span>             <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>         <span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">// ++++++++ 对list数组进行判断</span>         <span class="token keyword">return</span> <span class="token operator">&lt;</span>View<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// ++++++++ 对list数组进行判断</span>     <span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">// ++++++++ 对list数组进行判断</span> <span class="token punctuation">}</span></code></pre></li><li><p>报错：<code>request:fail url not in domain list</code>。在获取地址时，用的腾讯api解析的经纬度，测试时没问题，上线了就报这个错了。</p><p> 解决方案：微信公众平台，在“设置” -&gt; “开发设置”中设置request合法域名，添加<a href="https://apis.map.qq.com。（本来以为他们是一家，不用加，结果还是要加。）" target="_blank" rel="noopener">https://apis.map.qq.com。（本来以为他们是一家，不用加，结果还是要加。）</a></p><p> 参考：<a href="https://blog.csdn.net/weixin_43047977/article/details/84836501" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43047977/article/details/84836501</a> 。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> app </tag>
            
            <tag> react-native </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/03/14/hello-world/"/>
      <url>/2019/03/14/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
